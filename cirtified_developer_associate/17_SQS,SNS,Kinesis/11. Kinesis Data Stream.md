# Kinesis Data Stream

## 주요 구성 요소


### Stream

- 스트림은 데이터를 수집하는 논리적 채널이다. 스트림 내의 데이터는 레코드 형태로 저장된다.

### Shard

- 샤드는 스트림의 기본 처리 단위로, 스트림을 여러 샤드로 나눌 수 있다. 각 샤드는 데이터 쓰기 및 읽기 용량을 제공한다.
- 샤드는 초당 1MB의 데이터 쓰기와 2MB의 데이터 읽기를 처리할 수 있으며, 초당 최대 1,000개의 레코드를 처리할 수 있다.
- 샤드를 추가하거나 제거하여 스트림의 처리 용량을 동적으로 조정할 수 있다. 기존의 샤드를 분할하거나 두 개의 샤드를 병합하는 방식으로 스케일링한다.

### Record

- 레코드는 스트림에 저장되는 개별 데이터 항목이다. 각 레코드는 데이터 blob(최대 1MB)과 파티션 키로 구성된다.
- 레코드는 순서대로 저장되며, 특정 파티션 키를 기반으로 샤드에 매핑된다.

### Partition Key

- 파티션 키는 레코드가 특정 샤드에 할당되는 기준이 된다. 동일한 파티션 키를 가진 레코드는 동일한 샤드에 저장된다.
- 특정 파티션 키를 처리하는 스트림을 적절히 할당하여 스트림의 데이터를 균등하게 분배할 수 있다.

### Sequence Number

- 각 레코드는 순차 번호를 가지며, 이는 스트림 내에서 레코드의 순서를 나타낸다. Sequence Number 를 통해 특정 레코드를 식별하고 추적할 수 있다.

![](images/kinesis_data_stream.png)

## 주요 기능 및 특징

### 실시간 데이터 수집 및 처리

- 실시간으로 데이터를 캡처하고, 여러 소비자 애플리케이션이 데이터를 동시에 처리할 수 있다.
- 스트림 내 데이터는 기본적으로 24시간 동안 저장되며, 최대 7일 동안 데이터 보존 기간을 연장할 수 있다.

### 내구성 및 가용성

- 데이터는 AWS 리전에 걸쳐 복제되어 높은 내구성과 가용성을 제공한다.
- 자동으로 데이터를 복제하고 장애가 발생해도 데이터를 보호한다.

### 데이터 소비자(Consumers)

- Kinesis Data Streams는 데이터를 처리할 여러 소비자 애플리케이션을 지원한다. 소비자 애플리케이션은 데이터를 읽고, 처리하고, 저장할 수 있다.
- 일반적인 consumer 에는 Amazon EC2, AWS Lambda, Amazon Kinesis Data Firehose 등이 있다.

### Kinesis Client Library (KCL)

- KCL 은 스트림 데이터를 쉽게 읽고 처리할 수 있도록 도와주는 라이브러리이다. Java, Python, Node.js, Ruby 등 다양한 언어로 제공된다.

![](images/kinesis_data_stream_producing.png)