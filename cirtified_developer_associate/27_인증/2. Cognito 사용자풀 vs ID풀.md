> Amazon Cognito는 AWS에서 제공하는 사용자 인증, 권한 부여를 관리하는 서비스로, ID 풀(Identity Pool)과 사용자 풀(User Pool)이라는 두 가지 주요 기능을 제공한다. 이 두 기능은 각기 다른 목적으로 사용되며, 주로 인증과 권한 부여에서 차이를 보인다.

### 1. 사용자 풀 (User Pool)
- **정의**: **Cognito 사용자 풀**은 **사용자 인증 및 관리**에 사용되는 서비스다. 사용자는 **로그인**, **회원가입**, **비밀번호 재설정** 등의 기능을 사용자 풀을 통해 처리할 수 있으며, 기본적인 **OAuth 2.0**을 지원한다.
- **사용 예시**: 웹이나 모바일 애플리케이션에서 **사용자 등록, 로그인 및 인증**을 위해 사용자 풀을 사용할 수 있다. Facebook, Google, Amazon 같은 소셜 로그인을 통합하여 사용자 인증을 간편하게 관리할 수 있다.
- **특징**:
    - **사용자 인증**: 사용자 풀은 애플리케이션 사용자의 **인증**을 담당하며, 회원 가입, 로그인, 비밀번호 재설정 등의 기능을 자동으로 제공한다.
    - **소셜 로그인 및 외부 자격 증명 제공자**: Facebook, Google, Amazon 같은 **소셜 로그인**과 **SAML** 또는 **OpenID Connect** 기반 인증을 지원하여 외부 자격 증명 제공자와 통합할 수 있다.
    - **사용자 관리 기능**: 이메일 및 전화번호를 사용해 **사용자 확인**, **다단계 인증(MFA)**, **계정 복구** 등 다양한 보안 및 관리 기능을 제공한다.
    - **JWT 토큰 발급**: 사용자 풀은 로그인된 사용자에게 **JWT 토큰**(ID 토큰, 액세스 토큰)을 발급하여, 애플리케이션에서 인증된 사용자의 정보를 사용할 수 있게 한다.
    - **관리자 기능**: 관리자는 사용자 계정을 생성하거나 수정할 수 있으며, 사용자 속성 및 설정을 변경할 수 있다.

### 2. ID 풀 (Identity Pool)
- **정의**: **Cognito ID 풀**은 인증된 사용자에게 **AWS 리소스에 접근할 수 있는 임시 자격 증명**을 제공하는 서비스다. ID 풀은 **인증된 사용자** 또는 **비인증 사용자** 모두에게 AWS 리소스 접근을 위한 권한을 부여한다.
- **사용 예시**: 인증된 사용자가 **S3 버킷**, **DynamoDB 테이블** 등의 AWS 리소스에 접근할 수 있도록 **임시 자격 증명**을 발급하는 데 사용된다.
- **특징**:
    - **AWS 리소스에 대한 임시 자격 증명**: ID 풀은 사용자에게 **IAM 역할**을 기반으로 한 **임시 자격 증명**을 발급하여, 사용자가 AWS 리소스(S3, DynamoDB 등)에 안전하게 접근할 수 있도록 한다.
    - **비인증 사용자 지원**: ID 풀은 로그인되지 않은 **비인증 사용자**도 지원하며, 이들에게도 제한된 AWS 리소스 접근 권한을 부여할 수 있다.
    - **연합된 사용자 인증**: ID 풀은 사용자 풀뿐만 아니라 **Facebook, Google, Amazon** 등의 외부 자격 증명 제공자와도 통합할 수 있어, 다양한 인증 시스템을 지원한다.
    - **IAM 역할 기반 권한 부여**: ID 풀을 사용하면 **IAM 역할**을 통해 특정 사용자 그룹에 맞는 접근 권한을 세밀하게 설정할 수 있다. 인증된 사용자와 비인증 사용자 모두에 대해 각기 다른 역할을 부여할 수 있다.

### 3. 사용자 풀 vs. ID 풀 비교

| **특징**                           | **사용자 풀 (User Pool)**                                                                  | **ID 풀 (Identity Pool)**                                                                |
|------------------------------------|-------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------|
| **주요 목적**                      | 애플리케이션 사용자의 **인증 및 관리**                                                     | AWS 리소스에 접근할 수 있는 **임시 자격 증명** 발급                                       |
| **사용자 인증**                    | **사용자 로그인, 회원가입**, 비밀번호 관리, 소셜 로그인 등을 제공                           | 사용자 풀 또는 **외부 자격 증명 제공자**(Facebook, Google 등)과 통합하여 인증 제공        |
| **AWS 리소스 접근 권한 부여**      | AWS 리소스에 대한 접근 권한을 직접 제공하지 않음                                           | IAM 역할을 통해 **AWS 리소스**(S3, DynamoDB 등)에 접근할 수 있는 임시 자격 증명을 발급   |
| **임시 자격 증명 발급**            | 지원하지 않음                                                                              | **IAM 역할**을 기반으로 한 임시 자격 증명 발급                                            |
| **토큰 발급**                      | **JWT 토큰**(ID 토큰, 액세스 토큰) 발급                                                    | AWS 리소스 접근을 위한 **임시 보안 자격 증명** 발급                                        |
| **비인증 사용자 지원**             | 지원하지 않음                                                                              | 지원 (비로그인 사용자가 AWS 리소스에 제한된 접근을 할 수 있음)                            |
| **소셜 로그인 및 외부 인증**       | Facebook, Google, Amazon 등의 소셜 로그인 및 SAML, OpenID Connect 지원                     | 사용자 풀을 포함한 다양한 자격 증명 제공자와 연동 가능                                    |
| **주요 사용 사례**                 | **사용자 인증**, 로그인 관리, 소셜 로그인, JWT 토큰 기반 인증 시스템 구축                   | 인증된 사용자 또는 비인증 사용자에게 **AWS 리소스 접근 권한**을 부여                      |

### 4. 사용자 풀과 ID 풀 사용 예시
- **사용자 풀 사용 예시**: 웹 애플리케이션에서 사용자가 **로그인**할 수 있는 시스템을 구축하고, 로그인된 사용자를 식별하기 위해 JWT 토큰을 발급받아 API 호출 시 인증된 사용자인지 확인할 수 있다.
- **ID 풀 사용 예시**: 인증된 사용자가 **Amazon S3 버킷에 접근**할 수 있도록 **IAM 역할을 기반으로 임시 자격 증명**을 발급하여, 권한이 부여된 사용자가만 파일을 업로드할 수 있도록 한다.

### 요약:
- **Cognito 사용자 풀 (User Pool)**은 애플리케이션 사용자를 **인증하고 관리**하며, 로그인 및 회원가입 기능을 제공하고, JWT 토큰을 발급한다.
- **Cognito ID 풀 (Identity Pool)**은 **AWS 리소스에 대한 접근 권한**을 관리하며, 인증된 사용자에게 **IAM 역할을 기반으로 한 임시 자격 증명**을 발급한다.

사용자 풀은 주로 **사용자 인증**에 중점을 두고 있으며, ID 풀은 **AWS 리소스 접근 권한 관리**를 위한 도구다. 두 가지를 함께 사용하면 사용자 인증 후, AWS 리소스에 안전하게 접근할 수 있는 강력한 서버리스 애플리케이션을 구축할 수 있다.
