

> STS(Security Token Service)는 임시 보안 자격 증명을 제공하는 AWS 서비스이다. STS 는 사용자나 애플리케이션이 일시적으로 AWS 리소스에 액세스할 수 있도록 제한된 시간 동안 유효한 보안 토큰을 발급한다. 이를 통해 보안성과 유연성을 높이면서, 특정 상황에서 권한을 위임하거나 인증을 수행할 수 있다.

### 1. AWS STS의 주요 기능
- **임시 자격 증명 제공**: STS는 제한된 시간 동안 유효한 임시 보안 자격 증명을 발급한다. 이 자격 증명은 IAM 사용자 또는 역할 대신 사용할 수 있으며, 만료되면 자동으로 폐기된다.
- **역할 전환(Role Assumption)**: AWS STS 를 사용해 다른 AWS 계정 또는 동일 계정 내에서 역할(Role)을 전환할 수 있다. 이를 통해 권한을 위임하거나 다른 리소스에 접근할 수 있다.
- **교차 계정 액세스**: AWS STS는 하나의 계정에서 발급된 임시 자격 증명을 사용해 다른 AWS 계정에 접근할 수 있는 기능을 제공한다.
- **통합**: STS는 SAML 2.0 또는 OpenID Connect 와 같은 외부 인증 시스템과 통합하여 AWS 자격 증명을 발급할 수 있다. 이를 통해 외부 사용자나 시스템이 AWS 리소스에 접근할 수 있다.

### 2. AWS STS의 주요 구성 요소
- **AssumeRole**: IAM 역할을 기반으로 임시 자격 증명을 요청하는 API 다. 동일 계정 또는 다른 계정의 역할을 취할 수 있으며, 이를 통해 해당 역할의 권한을 위임받는다.
- **GetSessionToken**: 기존 IAM 사용자나 AWS 계정의 자격 증명을 임시로 대체하는 세션 토큰을 발급하는 API다. 이 토큰은 짧은 시간 동안 유효하며, 일반적으로 다중 인증(MFA)과 함께 사용된다.
- **AssumeRoleWithSAML**: SAML 2.0을 통해 인증된 사용자에게 AWS 자격 증명을 발급하는 API 다. 이를 통해 SAML을 사용한 연합 로그인(federation)을 구현할 수 있다.
- **AssumeRoleWithWebIdentity**: 외부 웹 ID 공급자(OpenID Connect 등)를 통해 인증된 사용자에게 임시 자격 증명을 발급하는 API 다. 이를 통해 웹 애플리케이션에서 AWS 리소스에 접근할 수 있다.

### 3. AWS STS 사용 사례
- **교차 계정 액세스**: STS 를 사용해 여러 AWS 계정 간에 역할을 전환하여 리소스에 접근할 수 있다. 이를 통해 여러 계정에서의 권한 관리를 쉽게 할 수 있다.
- **모바일 및 웹 애플리케이션 보안**: 모바일 또는 웹 애플리케이션에서 STS 를 사용해 임시 자격 증명을 발급받아 보안 위험을 줄이면서 AWS 리소스에 접근할 수 있다.
- **임시 권한 부여**: 특정 작업에만 임시로 권한을 부여해야 할 때, STS 를 사용해 제한된 시간 동안 필요한 권한을 제공할 수 있다.
- **외부 인증 통합**: SAML 또는 OpenID Connect 를 사용해 회사의 인증 시스템이나 소셜 로그인(예: Google, Facebook)으로 AWS 리소스에 접근할 수 있다.

### 4. AWS STS의 보안
- **임시 자격 증명의 만료**: STS 에서 발급한 임시 자격 증명은 유효 시간이 지나면 만료되어 자동으로 사용할 수 없게 된다. 이를 통해 장기적으로 남아 있는 보안 위험을 줄인다.
- **다중 인증(MFA)**: STS 는 다중 인증(MFA)을 지원하여, 추가적인 보안 계층을 제공한다. MFA와 함께 임시 자격 증명을 발급받으면 보안성이 더욱 강화된다.
- **최소 권한 원칙**: STS 로 발급된 임시 자격 증명은 필요한 최소한의 권한만 부여하는 것이 일반적인 보안 모범 사례다.

### 5. AWS STS의 장점
- **유연한 보안 관리**: 임시 자격 증명을 통해 최소 권한 원칙을 유지하면서도 필요한 리소스에 접근할 수 있다.
- **권한 위임**: IAM 역할을 사용하여 다른 사용자나 애플리케이션에 제한된 시간 동안 권한을 위임할 수 있다.
- **외부 사용자 통합**: SAML 이나 OpenID Connect 를 통해 외부 인증 시스템과 통합할 수 있어, 기존 자격 증명 관리 인프라와 AWS 를 쉽게 연동할 수 있다.


